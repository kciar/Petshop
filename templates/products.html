{% extends "base.html" %}

{% block content %}
<h2>Products</h2>
<form method="POST">
    {{ form.hidden_tag() }}
    <div>
        {{ form.name.label }}<br>
        {{ form.name(size=20) }}
    </div>
    <div>
        {{ form.category.label }}<br>
        {{ form.category(size=20) }}
    </div>
    <div>
        {{ form.price.label }}<br>
        {{ form.price(size=20) }}
    </div>
    <div>
        {{ form.quantity.label }}<br>
        {{ form.quantity(size=20) }}
    </div>
    <div>
        {{ form.submit() }}
    </div>
</form>

<h3>Product List</h3>
<table>
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Category</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Actions</th>
    </tr>
    {% for product in products %}
    <tr class="{{ 'low-stock' if product.quantity < 5 }}">
        <td>{{ product.id }}</td>
        <td>{{ product.name }}</td>
        <td>{{ product.category }}</td>
        <td>{{ product.price }}</td>
        <td>{{ product.quantity }}</td>
        <td>
            <a href="{{ url_for('edit_product', product_id=product.id) }}">Edit</a>
            <form action="{{ url_for('delete_product', product_id=product.id) }}" method="POST" style="display:inline;">
                <button type="submit">Delete</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}